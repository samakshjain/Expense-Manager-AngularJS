<!doctype html>
<html>
   <head>
      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.17/angular.min.js"></script>
      <script type="text/javascript" src="js/app.js"></script>
  
      <meta charset="UTF-8">

      <title>Simple expense manager project - CodePen</title>
      <link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

      <link rel="stylesheet" href="css/style.css" media="screen" type="text/css" />

   </head>

<body ng-app="angularExpenseApp" ng-controller="expenseController">
   <h1>Simple expense manager project</h1>

   <div id="form-box">
      <h2>Add a new item:</h2>
      <div class="add-btn">
         <span class="add-text">Add a friend</span>
         <div class="friend-input">
            <div><input type="text" placeholder="Eg: Vandy" /></div>
         </div>
         <span class="fa-stack fa-lg">
              <i class="fa fa-circle fa-stack-2x"></i>
              <i class="fa fa-plus fa-stack-1x" title="Add a friend"></i>
         </span>
      </div>
      <div>
         <form name="expform" ng-submit="addExpense(expense)" id="form-box" novalidate>
           <div>
             <span>Type:</span> 
               <select ng-model="expense.types" placeholder="Select mode of payment" required>
                   <option value='' disabled>- Please chose the mode of payment-</option>
                   <option value='Card'>Card</option>
                   <option value='Cash'>Cash</option>
                   <option value='Other'>Other</option>
               </select>
           </div>
           <div>
             <span>Add friend:</span> 
              <!--  <select ng-model="expense.friend" multiple="multiple">
                   <option value="Andy">Andy</option>
                   <option value="Sandy">Sandy</option>
                   <option value="Randy">Randy</option>
                   <option value="Mandy">Mandy</option>
               </select> -->
               <select name="friend" ng-model="expense.SelectedFriends" ng-options="friend as friend for friend in friends" multiple="multiple" required>Select a friend</select>
           </div>
           <div>
             <span>Name:</span> <input name"itemName" type="text" ng-model="expense.itemName" placeholder="What did you spend on?" required>
             <div class="error-msg" ng-show="expform.itemName.$touched">Please enter the name of the expense.</div>
           </div>
           <div>
             <span>Date:</span> <input name="xdate" type="date" ng-model="expense.date" ng-change="setCurrency(currencyfiltr)">
             <div class="error-msg" ng-show="!expform.xdate">Please enter a date.</div>
           </div>

           <div>
             <span>Currency:</span> 
               <select ng-model="expense.currency" type ="number" required>
                <option value='' disabled>- Please choose the currency-</option>
                  <option ng-repeat="currenC in currencies" value="{{currenC.name}}">{{currenC.name}}</option>
               </select>
           </div>
           <div>
             <span>Amount:</span> <input type="number" name="amount" ng-model="expense.amount" ng-model-options="{updateOn: 'blur'}" placeholder="How much?" required >
             <div ng-show="expform.amount.$touched" class="error-msg">
             	<p ng-show="!expform.amount">Cannot be empty</p>
             	<p ng-show="expform.amount.$invalid">You must enter a number</p>
             </div>
           </div>
           <!-- {{expense}}
           {{expenses}}
           {{objectOnScope}}
           {{expform.$invalid}} -->
           <button id="button" type="submit" ng-disabled="expform.$invalid">Add Expense!</button>
         </form>

      </div>
   </div>
   <div class="filter-block">
       <div class="filter-option">
         <span>Filter by friend:</span>
         <select ng-model="filtr" ng-options="friend as friend for friend in friends">
         	<option value='' disabled selected>- Please choose the friend-</option>
         </select>

       </div>
       <div class="filter-option">
         <span>Currency:</span>
         <select ng-model="currencyfiltr" ng-change="setCurrency(currencyfiltr)">
         	<option value='' disabled selected>- Please choose the currency-</option>
            <option ng-repeat="currenC in currencies" value="{{currenC.name}}">{{currenC.name}}</option>
         </select>
       </div>
   </div>
   <table>
      <tr>
       <th id="type" class="center">type</th>
       <th>name</th>
       <th>Friends</th>
       <th id="date">date</th>
       <th style="text-align: right" id="amount">amount</th>
       <th class="table-btn">edit</th>
       <th class="table-btn">delete</th>
      </tr>
      <tr ng-show="!expenses.length">
       <td colspan="4"><span>Your added items will show up here!</span></td>
      </tr>
      <tr ng-repeat="expense in expenses | filter : filtr | orderBy:'date':true">
         <td>{{ expense.types }}</td>
         <td>{{ expense.itemName }}</td>
         <td > <span ng-repeat="friend in expense.SelectedFriends">{{friend}}{{$last ? '' : ', '}}  &nbsp;</span></td>
         <td>{{ expense.date | date:'MMM d, y'}}</td>
         <td>{{ expense.amount | number :2}}</td>
         <td><i class="fa fa-pencil"></i></td>
         <td><i class="fa fa-trash-o"></i></td>
      </tr>
   </table>
</body>

</html>
